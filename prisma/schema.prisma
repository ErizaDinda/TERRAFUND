// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// 1. Tabel Proyek (Menyimpan data kampanye donasi)
model Project {
  id            Int        @id @default(autoincrement())
  title         String
  description   String     @db.Text
  targetAmount  String     // Kita pakai String biar aman untuk angka Rupiah besar
  raisedAmount  String     @default("0")
  imageUrl      String?    // Link gambar banner
  organization  String
  endDate       DateTime?
  createdAt     DateTime   @default(now())
  
  // Relasi: Satu proyek bisa punya banyak donasi
  donations     Donation[] 
}

// 2. Tabel Donasi (Mencatat setiap transaksi masuk)
model Donation {
  id            Int      @id @default(autoincrement())
  donorName     String   @default("Anonim")
  amount        String   // Jumlah donasi
  paymentMethod String   // Contoh: "crypto" atau "bank"
  txHash        String?  // PENTING: Menyimpan bukti hash dari Blockchain
  createdAt     DateTime @default(now())
  
  // Relasi: Donasi ini masuk ke proyek mana?
  projectId     Int
  project       Project  @relation(fields: [projectId], references: [id])
}